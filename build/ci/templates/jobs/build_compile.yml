# Overview:
# Generic jobs template to compile and build extension

jobs:
- job: Compile
  pool:
    vmImage: "macos-latest"
  steps:
    - template: ../steps/compile.yml

- job: Build
  pool:
    vmImage: "macos-latest"
  steps:
    - template: ../steps/build.yml

- job: Hygiene
  pool:
    vmImage: "macos-latest"
  steps:
    - template: initialization.yml
      parameters:
        PythonVersion: $(PythonVersion)
        workingDirectory: $(Build.SourcesDirectory)
        compile: 'false'
        installVSCEorNPX: 'false'

    - bash: npx tslint --project tsconfig.json
      displayName: "Lint"
      workingDirectory: $(Build.SourcesDirectory)

- job: Compile_UITests
  pool:
    vmImage: "macos-latest"
  steps:
    - template: initialization.yml
      parameters:
        workingDirectory: $(Build.SourcesDirectory)/uitests
        compile: 'true'
        installVSCEorNPX: 'false'


- job: Hygiene_UITests
  pool:
    vmImage: "macos-latest"
  steps:
    - template: initialization.yml
      parameters:
        workingDirectory: $(Build.SourcesDirectory)/uitests
        compile: 'false'
        installVSCEorNPX: 'false'

    - bash: npx tslint --project tsconfig.json
      displayName: "Lint"
      workingDirectory: $(Build.SourcesDirectory)/uitests

    - bash: npx prettier --check 'src/**/*.ts'
      displayName: "Format"
      workingDirectory: $(Build.SourcesDirectory)/uitests
